<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../bower_components/marked-element/marked-element.html">

<link rel="import" href="my-icons.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="event-card">

    <template>

        <style include="shared-styles">

            /* GENERAL */
            * {
                font-weight: 300;
            }

            .eventCard {
                display: block;
                width: 100%;
                margin-top: 0;
                margin-bottom: 0;
                margin-left: auto;
                margin-right: auto;
                padding: 16px;
                border-bottom: solid 1px var(--app-background-secondary-text-color);
                background-color: var(--app-secondary-background-color);
                color: var(--app-background-primary-text-color);
            }

            .icon {
                color: var(--app-dark-primary-color);
            }

            .who {
                font-weight: 500;
                font-size: 14px;
                text-decoration: none;
                color: var(--app-secondary-color);
                margin-bottom: 4px;
            }

            .body {
                display: block;
                margin-top: 4px;
            }

            .when {
                position: absolute;
                top: 20px;
                right: 16px;
                font-size: 12px;
                color: #666;
            }

            a {
                color: var(--app-secondary-color);
                text-decoration: none;
            }

        </style>

        <!-- event cards -->
        <paper-card class="eventCard">
            <iron-icon class="icon"
                       icon="my-icons:person-circle">
            </iron-icon>
            <a class="who"
               href="@[[event.who]]">
                @[[event.who]]
            </a>
            <span class="when">
                <span>[[_timeFromNow(event.when)]]</span>
            </span>
            <span class="body">
                <span class="what">[[_capitalizeSentence(event.what)]]</span>
            <a class="at"
               href="[[event.atLink]]">
                [[event.atName]]
            </a>
            </span>
        </paper-card>

    </template>
</dom-module>

<script>

    Polymer({

        is: 'event-card',

        behaviors: [
            Polymer.AppLocalizeBehavior
        ],

        properties: {

            event: {
                type: Object
            }

        },

        ready: function() {

        },

        _timeFromNow: function(date) {
            return new IntlRelativeFormat('en-us').format(new Date(date));
        },

        _capitalizeSentence: function(sentence) {
            return sentence.charAt(0).toUpperCase() + sentence.slice(1);
        }

    });

</script>