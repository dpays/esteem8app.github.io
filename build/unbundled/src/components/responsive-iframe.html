<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<link rel="import" href="../shared-styles.html">

</head><body><dom-module id="responsive-iframe">

    <template>

        <style include="shared-styles">

            :host {
                width: 100%;
            }

            #iframecontainer {
                width: 100%;
                margin: 0;
                padding: 0;
            }

            .empty-iframe {
                text-align: center;
            }

            .empty-iframe #showSourceButton {
                display: inline;
                z-index: 2;
            }

            .url {
                overflow: auto;
                position: absolute;
                padding-left: 8px;
                padding-right: 8px;
                left: 0;
                top: 0;
                z-index: 1;
            }

        </style>

        <div id="iframecontainer">

            <div class="empty-iframe" hidden="[[_url]]" style="height: [[_height]]px; line-height: [[_height]]px">

                <span class="empty-iframe-content">
                    <paper-button id="showSourceButton" on-tap="_showSource()">
                        Show source
                    </paper-button>
                    <span class="url" style="width: [[_computeWidthLessSomething(_width, '16')]]px">[[url]]</span>
                </span>
            </div>

            <iframe src="[[_url]]" hidden="[[!_url]]" frameborder="0" width="[[_width]]px" height="[[_height]]px" allowfullscreen="">
            </iframe>

        </div>

    </template>
</dom-module>

<script>Polymer({is:"responsive-iframe",properties:{url:{type:String},ratio:{type:String},promptUser:{type:Boolean,observer:"_setUrl"},_url:{type:Number},_width:{type:Number},_height:{type:Number}},ready:function(){this._url="",this.$.showSourceButton.addEventListener("tap",this._showSource.bind(this));var t=this;setTimeout(function(){t._computeFrameSize()},300);var e=!1;"undefined"!=typeof this.promptUser&&(e=this.promptUser),e||(this._url=this.url)},_computeFrameSize:function(){var t="16:9",e="";"undefined"!=typeof this.ratio&&(t=this.ratio),"undefined"!=typeof this._width&&"undefined"!=typeof this._height?t=this._width+":"+this._height:"undefined"!=typeof this._height&&(e=this._height);var i=t.split(":"),r=parseInt(i[0]),s=parseInt(i[1]),t=s/r,h=this.$.iframecontainer.clientWidth,n=h,o=n*t;""!==e&&(o=e),this.set("_width",parseInt(n)),this.set("_height",parseInt(o))},_setUrl:function(){"undefined"!=typeof this.promptUser&&(this.promptUser||(this._url=this.url))},_showSource:function(){this.promptUser=!1},_computeWidthLessSomething:function(t,e){return t-e}});</script></body></html>