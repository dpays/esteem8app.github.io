<html><head><link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-toast/paper-toast.html">

<script src="./src/steem.min.js"></script>
<script src="../../scripts/functions.js"></script>

</head><body><dom-module id="steem-get-state">

    <template>

        
        <paper-toast id="toastPostNotFound" class="fit-bottom" text="Sorry bro :/ we didn't found anything">
        </paper-toast>

    </template>

</dom-module>

<script>!function(){Polymer({is:"steem-get-state",properties:{path:{type:String},posts:{type:Array,notify:!0},isLoading:{type:Boolean,notify:!0}},observers:["_pathChanged(path)"],_pathChanged:function(t){if(""!=t){this.isLoading=!0;var e=this;window.steem.api.getState(t,function(t,o){t?e._showErrorToast():e._computePosts(o.content)})}},_computePostBody:function(t){return t},_computePosts:function(t){var e=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o],s={};if("undefined"!=typeof a.json_metadata){var i={};try{i=JSON.parse(a.json_metadata)}catch(t){console.error(t)}if("undefined"!=typeof i.image&&(s.images=i.image),"undefined"!=typeof i.tags){var n=i.tags;n.shift(),s.tags=n}}"undefined"==typeof s.images&&(s.images=[]),"undefined"==typeof s.tags&&(s.tags=[]),s.body=a.body,s.category=a.category,s.title=a.title,s.author=a.author,s.dollarValue=parseFloat(a.pending_payout_value.split(" ")[0])+parseFloat(a.total_payout_value.split(" ")[0])+parseFloat(a.curator_payout_value.split(" ")[0]),s.net_votes=a.net_votes,s.children=a.children,s.activeVotes=a.active_votes,s.created=a.created,s.url=a.url,e.push(s)}this._setPosts(e)},_setPosts:function(t){this.isLoading=!1,this.posts=t},_showErrorToast:function(){this.$.toastPostNotFound.show()}})}();</script></body></html>