!function(r,e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():r[e]=t()}(this,"QRCode",function(){for(var r=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]],e=0,t=1,n=2,a=4,o=8,u=/^\d*$/,f=/^[A-Za-z0-9 $%*+\-.\/:]*$/,i=/^[A-Z0-9 $%*+\-.\/:]*$/,s=1,h=0,c=3,l=2,v=[],g=[-1],p=0,d=1;p<255;++p)v.push(d),g[d]=p,d=2*d^(d>=128?285:0);for(var m=[[]],p=0;p<30;++p){for(var w=m[p],b=[],x=0;x<=p;++x){var y=x<p?v[w[x]]:0,A=v[(p+(w[x-1]||0))%255];b.push(g[y^A])}m.push(b)}for(var M={},p=0;p<45;++p)M["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(p)]=p;var C=[function(r,e){return(r+e)%2==0},function(r,e){return r%2==0},function(r,e){return e%3==0},function(r,e){return(r+e)%3==0},function(r,e){return((r/2|0)+(e/3|0))%2==0},function(r,e){return r*e%2+r*e%3==0},function(r,e){return(r*e%2+r*e%3)%2==0},function(r,e){return((r+e)%2+r*e%3)%2==0}],L=function(r){return r>6},k=function(r){return 4*r+17},E=function(e){var t=r[e],n=16*e*e+128*e+64;return L(e)&&(n-=36),t[2].length&&(n-=25*t[2].length*t[2].length-10*t[2].length-55),n},$=function(e,t){var n=E(e)&-8,a=r[e];return n-=8*a[0][t]*a[1][t]},z=function(r,e){switch(e){case t:return r<10?10:r<27?12:14;case n:return r<10?9:r<27?11:13;case a:return r<10?8:16;case o:return r<10?8:r<27?10:12}},H=function(r,e,u){var f=$(r,u)-4-z(r,e);switch(e){case t:return 3*(f/10|0)+(f%10<4?0:f%10<7?1:2);case n:return 2*(f/11|0)+(f%11<6?0:1);case a:return f/8|0;case o:return f/13|0}},N=function(r,e){switch(r){case t:return e.match(u)?e:null;case n:return e.match(f)?e.toUpperCase():null;case a:if("string"==typeof e){for(var o=[],i=0;i<e.length;++i){var s=e.charCodeAt(i);s<128?o.push(s):s<2048?o.push(192|s>>6,128|63&s):s<65536?o.push(224|s>>12,128|s>>6&63,128|63&s):o.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)}return o}return e}},R=function(r,o,u,f){var i=[],s=0,h=8,c=u.length,l=function(r,e){if(e>=h){for(i.push(s|r>>(e-=h));e>=8;)i.push(r>>(e-=8)&255);s=0,h=8}e>0&&(s|=(r&(1<<e)-1)<<(h-=e))},v=z(r,o);switch(l(o,4),l(c,v),o){case t:for(var g=2;g<c;g+=3)l(parseInt(u.substring(g-2,g+1),10),10);l(parseInt(u.substring(g-2),10),[0,4,7][c%3]);break;case n:for(var g=1;g<c;g+=2)l(45*M[u.charAt(g-1)]+M[u.charAt(g)],11);c%2==1&&l(M[u.charAt(g-1)],6);break;case a:for(var g=0;g<c;++g)l(u[g],8)}for(l(e,4),h<8&&i.push(s);i.length+1<f;)i.push(236,17);return i.length<f&&i.push(236),i},S=function(r,e){for(var t=r.slice(0),n=r.length,a=e.length,o=0;o<a;++o)t.push(0);for(var o=0;o<n;){var u=g[t[o++]];if(u>=0)for(var f=0;f<a;++f)t[o+f]^=v[(u+e[f])%255]}return t.slice(n)},F=function(r,e,t){for(var n=[],a=r.length/e|0,o=0,u=e-r.length%e,f=0;f<u;++f)n.push(o),o+=a;for(var f=u;f<e;++f)n.push(o),o+=a+1;n.push(o);for(var i=[],f=0;f<e;++f)i.push(S(r.slice(n[f],n[f+1]),t));for(var s=[],h=r.length/e|0,f=0;f<h;++f)for(var c=0;c<e;++c)s.push(r[n[c]+f]);for(var c=u;c<e;++c)s.push(r[n[c+1]-1]);for(var f=0;f<t.length;++f)for(var c=0;c<e;++c)s.push(i[c][f]);return s},G=function(r,e,t,n){for(var a=r<<n,o=e-1;o>=0;--o)a>>n+o&1&&(a^=t<<o);return r<<n|a},T=function(e){for(var t=r[e],n=k(e),a=[],o=[],u=0;u<n;++u)a.push([]),o.push([]);var f=function(r,e,t,n,u){for(var f=0;f<t;++f)for(var i=0;i<n;++i)a[r+f][e+i]=u[f]>>i&1,o[r+f][e+i]=1};f(0,0,9,9,[127,65,93,93,93,65,383,0,64]),f(n-8,0,8,9,[256,127,65,93,93,93,65,127]),f(0,n-8,9,8,[254,130,186,186,186,130,254,0,0]);for(var u=9;u<n-8;++u)a[6][u]=a[u][6]=1&~u,o[6][u]=o[u][6]=1;for(var i=t[2],s=i.length,u=0;u<s;++u)for(var h=0==u||u==s-1?1:0,c=0==u?s-1:s,l=h;l<c;++l)f(i[u],i[l],5,5,[31,17,21,17,31]);if(L(e))for(var v=G(e,6,7973,12),g=0,u=0;u<6;++u)for(var l=0;l<3;++l)a[u][n-11+l]=a[n-11+l][u]=v>>g++&1,o[u][n-11+l]=o[n-11+l][u]=1;return{matrix:a,reserved:o}},U=function(r,e,t){for(var n=r.length,a=0,o=-1,u=n-1;u>=0;u-=2){6==u&&--u;for(var f=o<0?n-1:0,i=0;i<n;++i){for(var s=u;s>u-2;--s)e[f][s]||(r[f][s]=t[a>>3]>>(7&~a)&1,++a);f+=o}o=-o}return r},j=function(r,e,t){for(var n=C[t],a=r.length,o=0;o<a;++o)for(var u=0;u<a;++u)e[o][u]||(r[o][u]^=n(o,u));return r},I=function(r,e,t,n){for(var a=r.length,o=21522^G(t<<3|n,5,1335,10),u=0;u<15;++u){var f=[0,1,2,3,4,5,7,8,a-7,a-6,a-5,a-4,a-3,a-2,a-1][u],i=[a-1,a-2,a-3,a-4,a-5,a-6,a-7,a-8,7,5,4,3,2,1,0][u];r[f][8]=r[8][i]=o>>u&1}return r},P=function(r){for(var e=3,t=3,n=40,a=10,o=function(r){for(var t=0,a=0;a<r.length;++a)r[a]>=5&&(t+=e+(r[a]-5));for(var a=5;a<r.length;a+=2){var o=r[a];r[a-1]==o&&r[a-2]==3*o&&r[a-3]==o&&r[a-4]==o&&(r[a-5]>=4*o||r[a+1]>=4*o)&&(t+=n)}return t},u=r.length,f=0,i=0,s=0;s<u;++s){var h,c=r[s];h=[0];for(var l=0;l<u;){var v;for(v=0;l<u&&c[l];++v)++l;for(h.push(v),v=0;l<u&&!c[l];++v)++l;h.push(v)}f+=o(h),h=[0];for(var l=0;l<u;){var v;for(v=0;l<u&&r[l][s];++v)++l;for(h.push(v),v=0;l<u&&!r[l][s];++v)++l;h.push(v)}f+=o(h);var g=r[s+1]||[];i+=c[0];for(var l=1;l<u;++l){var p=c[l];i+=p,c[l-1]==p&&g[l]===p&&g[l-1]===p&&(f+=t)}}return f+=a*(Math.abs(i/u/u-.5)/.05|0)},Q=function(e,t,n,a,o){var u=r[t],f=R(t,n,e,$(t,a)>>3);f=F(f,u[1][a],m[u[0][a]]);var i=T(t),s=i.matrix,h=i.reserved;if(U(s,h,f),o<0){j(s,h,0),I(s,h,a,0);var c=0,l=P(s);for(j(s,h,0),o=1;o<8;++o){j(s,h,o),I(s,h,a,o);var v=P(s);l>v&&(l=v,c=o),j(s,h,o)}o=c}return j(s,h,o),I(s,h,a,o),s},Z={generate:function(r,e){var o={numeric:t,alphanumeric:n,octet:a},f={L:s,M:h,Q:c,H:l};e=e||{};var v=e.version||-1,g=f[(e.ecclevel||"L").toUpperCase()],p=e.mode?o[e.mode.toLowerCase()]:-1,d="mask"in e?e.mask:-1;if(p<0)p="string"==typeof r?r.match(u)?t:r.match(i)?n:a:a;else if(p!=t&&p!=n&&p!=a)throw"invalid or unsupported mode";if(r=N(p,r),null===r)throw"invalid data format";if(g<0||g>3)throw"invalid ECC level";if(v<0){for(v=1;v<=40&&!(r.length<=H(v,p,g));++v);if(v>40)throw"too large data"}else if(v<1||v>40)throw"invalid version";if(d!=-1&&(d<0||d>8))throw"invalid mask";return Q(r,v,p,g,d)},generateHTML:function(r,e){e=e||{};for(var t=Z.generate(r,e),n=Math.max(e.modulesize||5,.5),a=Math.max(null!==e.margin?e.margin:4,0),o=document.createElement("div"),u=t.length,f=['<table border="0" cellspacing="0" cellpadding="0" style="border:'+n*a+'px solid #fff;background:#fff">'],i=0;i<u;++i){f.push("<tr>");for(var s=0;s<u;++s)f.push('<td style="width:'+n+"px;height:"+n+"px"+(t[i][s]?";background:#000":"")+'"></td>');f.push("</tr>")}return o.className="qrcode",o.innerHTML=f.join("")+"</table>",o},generateSVG:function(r,e){e=e||{};var t=Z.generate(r,e),n=t.length,a=Math.max(e.modulesize||5,.5),o=Math.max(null!==e.margin?e.margin:4,0),u=a*(n+2*o),f=' class= "fg" width="'+a+'" height="'+a+'"/>',i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 "+u+" "+u),i.setAttribute("style","shape-rendering:crispEdges"),e.modulesize&&(i.setAttribute("width",u),i.setAttribute("height",u));for(var s=["<style scoped>.bg{fill:#FFF}.fg{fill:#000}</style>",'<rect class="bg" x="0" y="0"','width="'+u+'" height="'+u+'"/>'],h=o*a,c=0;c<n;++c){for(var l=o*a,v=0;v<n;++v)t[c][v]&&s.push('<rect x="'+l+'" y="'+h+'"',f),l+=a;h+=a}return i.innerHTML=s.join(""),i},generatePNG:function(r,e){e=e||{};var t,n=Z.generate(r,e),a=Math.max(e.modulesize||5,.5),o=Math.max(null!==e.margin?e.margin:4,0),u=n.length,f=a*(u+2*o),i=document.createElement("canvas");if(i.width=i.height=f,t=i.getContext("2d"),!t)throw"canvas support is needed for PNG output";t.fillStyle="#fff",t.fillRect(0,0,f,f),t.fillStyle="#000";for(var s=0;s<u;++s)for(var h=0;h<u;++h)n[s][h]&&t.fillRect(a*(o+h),a*(o+s),a,a);return i.toDataURL()}};return Z});