<html><head><script src="../undo/undo.js"></script>
<script>UndoMgrBehavior={properties:{canUndo:{type:Boolean,value:!1,readOnly:!0,notify:!0},canRedo:{type:Boolean,value:!1,readOnly:!0,notify:!0},stack:{type:Object,value:function(){return new Undo.Stack},readOnly:!0},target:{type:Object,value:function(){return this},observer:"_targetChanged"},value:{type:String,observer:"_valueChanged",notify:!0},undoObserver:{type:Object,value:function(){var t=!1,e=Undo.Command.extend({constructor:function(t,e,n){this.element=t,this.oldValue=e,this.newValue=n},execute:function(){},undo:function(){t=!0,Polymer.dom(this.element).innerHTML=this.oldValue},redo:function(){t=!0,Polymer.dom(this.element).innerHTML=this.newValue}});return new MutationObserver(function(){if(t)return void(t=!1);if(this.sanitize()){var n=Polymer.dom(this.target).innerHTML||"";this.stack.execute(new e(this.target,this.value,n)),this.value=n}}.bind(this))},readOnly:!0,observer:"_undoObserverChanged"}},attached:function(){this.observe()},detached:function(){this.disconnect()},ready:function(){this.async(function(){this.stack.commands.pop(),this.stack.stackPosition-=1,this.stack.changed=function(){this._setCanUndo(this.stack.canUndo()),this._setCanRedo(this.stack.canRedo())}.bind(this),this._setCanUndo(this.stack.canUndo()),this._setCanRedo(this.stack.canRedo())},500)},clearHistory:function(){this.stack.commands=[],this.stack.stackPosition=-1,this._setCanUndo(this.stack.canUndo()),this._setCanRedo(this.stack.canRedo())},disconnect:function(){this.undoObserver&&this.undoObserver.disconnect()},observe:function(){this.undoObserver&&this.target&&this.undoObserver.observe(this.target,{attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0})},redo:function(){return!!this.stack.canRedo()&&(this.stack.redo(),this.value=Polymer.dom(this.target).innerHTML||"",!0)},sanitize:function(){return!0},undo:function(){return!!this.stack.canUndo()&&(this.stack.undo(),this.value=Polymer.dom(this.target).innerHTML||"",!0)},_targetChanged:function(){this.disconnect(),this.observe(),Polymer.dom(this.target).innerHTML=this.value},_undoObserverChanged:function(t,e){e&&e.disconnect(),this.observe()},_valueChanged:function(){return"string"!=typeof this.value?void(this.value=""):void((Polymer.dom(this.target).innerHTML||"")!==this.value&&(Polymer.dom(this.target).innerHTML=this.value))}};</script>
</head><body></body></html>