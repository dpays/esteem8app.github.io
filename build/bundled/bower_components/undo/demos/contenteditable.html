<!DOCTYPE html><html><head>
	<meta charset="utf-8">
	<script src="../undo.js"></script>
	<script src="../vendor/jquery-1.5.1.js"></script>
	<title>Undo.js demo</title>
	<style>
		body { font:62.5% Verdana,Arial,sans-serif; }
		#text { border: 1px dotted green; }
	</style>
	<script>$(function(){function t(){o.attr("disabled",!e.canUndo()),d.attr("disabled",!e.canRedo()),a.toggle(e.dirty())}var e=new Undo.Stack,n=Undo.Command.extend({constructor:function(t,e,n){this.textarea=t,this.oldValue=e,this.newValue=n},execute:function(){},undo:function(){this.textarea.html(this.oldValue)},redo:function(){this.textarea.html(this.newValue)}});e.changed=function(){t()};var o=$(".undo"),d=$(".redo"),a=$(".dirty");t(),$(document.body).delegate(".undo, .redo, .save","click",function(){var t=$(this).attr("class");return e[t](),!1});var c,u=$("#text"),i=u.html();$("#text").bind("keyup",function(){clearTimeout(c),c=setTimeout(function(){var t=u.html();t!=i&&(e.execute(new n(u,i,t)),i=t)},250)}),$(".bold").click(function(){document.execCommand("bold",!1);var t=u.html();e.execute(new n(u,i,t)),i=t}),$(document).keydown(function(t){t.metaKey&&90==t.keyCode&&(t.preventDefault(),t.shiftKey?e.canRedo()&&e.redo():e.canUndo()&&e.undo())})});</script>
</head>
<body>
	<button class="undo" href="#">Undo</button>
	<button class="redo" href="#">Redo</button>
	<button class="save" href="#">Save<span class="dirty">*</span></button>
	<button class="bold">Bold!</button>
	<div id="text" contenteditable="true">Some content, edit me!</div>

</body></html>