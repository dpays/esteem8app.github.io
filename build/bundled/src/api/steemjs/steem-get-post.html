<html><head><link rel="import" href="../../../bower_components/polymer/polymer.html">

<script src="./src/steem.min.js"></script>

</head><body><dom-module id="steem-get-post"></dom-module>

<script>!function(){Polymer({is:"steem-get-post",properties:{path:{type:String},post:{type:Object,notify:!0},queryError:{type:Boolean,notify:!0},isLoading:{type:Boolean,notify:!0}},observers:["_pathChanged(path)"],ready:function(){"undefined"==typeof this.queryError&&(this.queryError=!1),"undefined"==typeof this.isLoading&&(this.isLoading=!0)},_pathChanged:function(t){var t=t.replace(/ /g,"");if(/(\/)?[a-zA-Z0-9-]+\/@[a-zA-Z0-9-]+\/[a-zA-Z0-9-]+/.test(t)){this.isLoading=!0;var e=this;this.async(function(){window.steem.api.getState(t,function(o,a){o?(e.queryError=!0,console.error('steem-get-post.html: something went wrong with the query, path="'+t+'"')):e._computePost(a.content)})})}else console.error('steem-get-post.html: path not fit requirements, path="'+t+'"')},_computePost:function(t){var e={comments:[]};for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];if(a.url==="/"+this.path){if("undefined"!=typeof a.json_metadata){var n=JSON.parse(a.json_metadata)||{};"undefined"!=typeof n.image&&(e.images=n.image),"undefined"!=typeof n.tags&&(e.tags=n.tags)}"undefined"==typeof e.images&&(e.images=[]),"undefined"==typeof e.tags&&(e.tags=[]),e.body=a.body,e.url=a.url,e.category=a.category,e.title=a.title,e.author=a.author,e.dollarValue=parseFloat(a.total_pending_payout_value.split(" ")[0])+parseFloat(a.total_payout_value.split(" ")[0]),e.net_votes=a.net_votes,e.children=a.children,e.activeVotes=a.active_votes,e.created=a.created,e.commentsLength=0}else if(e.commentsLength++,1===a.depth){var r={};r.parent_author=a.parent_author,r.parent_permlink=a.parent_permlink,r.permlink=a.permlink,r.author=a.author,r.created=a.created,r.votes=a.net_votes,r.replies=a.children,r.dollarValue=parseFloat(a.total_pending_payout_value.split(" ")[0])+parseFloat(a.total_payout_value.split(" ")[0]),r.body=a.body,e.comments.push(r)}}this.set("post",e),console.log(e.body),this.isLoading=!1}})}();</script></body></html>