<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="my-icons.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../components/my-icons.html">

</head><body><dom-module id="file-card">

    <template>

        <style include="shared-styles">

            /* GENERAL */
            :host {
                text-align: left;
            }

            * {
                font-weight: 500;
            }

            paper-checkbox {
                --paper-checkbox-checked-color: var(--app-secondary-color);
                --paper-checkbox-checked-ink-color: var(--app-secondary-color);

                --paper-checkbox-unchecked-color: var(--app-background-primary-text-color);
                --paper-checkbox-unchecked-ink-color: var(--app-secondary-text-color);
                --paper-checkbox-label-color: var(--app-secondary-text-color);
            }

            #fileCard {
                display: inline-block;
                margin: 12px;
                background-color: var(--app-secondary-background-color);
                background-size: cover;
                color: var(--app-background-primary-text-color);
                width: 216px;
                height: 133px;
            }

            @media (max-width: 400px) {
                #fileCard {
                    margin: 8px;
                    width: 142px;
                    height: 88px;
                }
            }

            #headerImage {
                @apply(--layout-vertical);
                text-align: left;
                width: 100%;
                height: 100%;
                margin: 0;
                color: #eee;
            }

            #headerImage .vertical-space {
                @apply(--layout-flex);
            }

            #headerImage .heading {
                padding: 8px;
                padding-top: 12px;
                background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, .8));
            }

            #selectFileCheckbox {
                position: absolute;
                top: 10px;
                right: 2px;
                z-index: 3;
            }

        </style>


        
        <paper-card id="fileCard">

                <div id="headerImage" on-tap="_fileTaped()">
                    <div class="vertical-space"></div>
                    <div class="heading">
                        [[file.name]]
                    </div>
                </div>

                <paper-checkbox id="selectFileCheckbox" checked="{{_isSelected}}" hidden="[[!allowSelect]]">
                </paper-checkbox>

        </paper-card>

    </template>
</dom-module>

<script>Polymer({is:"file-card",properties:{file:{type:Object},action:{type:Object,notify:!0},selectedFiles:{type:Array,notify:!0},allowSelect:{type:Boolean},_isSelected:{type:Boolean}},observers:["_computeIsSelectedFile(selectedFiles, selectedFiles.length)","_updateSelectFile(_isSelected)","_updateImage(file.image)"],ready:function(){this.$.headerImage.addEventListener("tap",this._fileTaped.bind(this)),"undefined"==typeof this.allowSelect&&(this.allowSelect=!0),"undefined"==typeof this.selectedFiles&&(this.selectedFiles=[],this.allowSelect=!1),this._isSelected=!1},_fileTaped:function(){this.allowSelect?this._isSelected?this.set("action",{type:"view",id:this.file.id}):this._isSelected=!0:this.set("action",{type:"view",id:this.file.id})},_updateImage:function(e){this.$.fileCard.setAttribute("style",'background-image: url("'+e+'");')},_computeIsSelectedFile:function(e,i){i&&e.indexOf(this.file.id)>=0?this._isSelected=!0:this._isSelected=!1},_updateSelectFile:function(e){if(e)this.push("selectedFiles",this.file.id);else if("undefined"!=typeof this.selectedFiles){var i=this.selectedFiles.indexOf(this.file.id);i>=0&&this.splice("selectedFiles",i,1)}}});</script></body></html>