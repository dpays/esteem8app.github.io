<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="my-icons.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../components/my-icons.html">

</head><body><dom-module id="product-card">

    <template>

        <style include="shared-styles">

            /* GENERAL */
            :host {
                text-align: left;
            }

            * {
                font-weight: 500;
            }

            paper-checkbox {
                --paper-checkbox-checked-color: var(--app-secondary-color);
                --paper-checkbox-checked-ink-color: var(--app-secondary-color);

                --paper-checkbox-unchecked-color: var(--app-background-primary-text-color);
                --paper-checkbox-unchecked-ink-color: var(--app-secondary-text-color);
                --paper-checkbox-label-color: var(--app-secondary-text-color);
            }

            #productCard {
                display: inline-block;
                margin: 12px;
                background-color: var(--app-secondary-background-color);
                background-size: cover;
                color: var(--app-background-primary-text-color);
                width: 216px;
                height: 133px;
            }

            @media (max-width: 400px) {
                #productCard {
                    margin: 8px;
                    width: 142px;
                    height: 88px;
                }
            }

            #headerImage {
                @apply(--layout-vertical);
                text-align: left;
                width: 100%;
                height: 100%;
                margin: 0;
                color: #eee;
            }

            #headerImage .vertical-space {
                @apply(--layout-flex);
            }

            #headerImage .heading {
                padding: 8px;
                padding-top: 12px;
                background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, .8));
            }

            #selectProductCheckbox {
                position: absolute;
                top: 10px;
                right: 2px;
                z-index: 3;
            }

            .price {
                padding: 4px;
                background-color: var(--app-secondary-color);
                color: var(--app-secondary-text-color);
                border-radius: 4px;
                font-size: 12px;
                float: right;
            }

        </style>


        
        <paper-card id="productCard">

            <div id="headerImage" on-tap="_productTaped()">
                <div class="vertical-space"></div>
                <div class="heading">
                    [[product.name]]
                    <span class="price">[[product.priceValue]] [[product.priceType]]</span>
                </div>
            </div>

            <paper-checkbox id="selectProductCheckbox" checked="{{_isSelected}}" hidden="[[!allowSelect]]">
            </paper-checkbox>

        </paper-card>

    </template>
</dom-module>

<script>Polymer({is:"product-card",properties:{product:{type:Object},action:{type:Object,notify:!0},selectedProducts:{type:Array,notify:!0},allowSelect:{type:Boolean},_isSelected:{type:Boolean}},observers:["_computeIsSelectedProduct(selectedProducts, selectedProducts.length)","_updateSelectProduct(_isSelected)","_updateImage(product.contents)"],ready:function(){this.$.headerImage.addEventListener("tap",this._productTaped.bind(this)),"undefined"==typeof this.allowSelect&&(this.allowSelect=!0),"undefined"==typeof this.selectedProducts&&(this.selectedProducts=[],this.allowSelect=!1),this._isSelected=!1},_productTaped:function(){this.allowSelect?this._isSelected?this.set("action",{type:"view",id:this.product.id}):this._isSelected=!0:this.set("action",{type:"view",id:this.product.id})},_updateImage:function(e){var t="https://github.com/esteem8app/esteem8app.github.io/blob/master/src/images/other/txt.png?raw=true";"undefined"!=typeof e[0]&&(e[0].includes(".png")||e[0].includes(".jpg"))&&(t=e[0]),this.$.productCard.setAttribute("style",'background-image: url("'+t+'");')},_computeIsSelectedProduct:function(e,t){t&&e.indexOf(this.product.id)>=0?this._isSelected=!0:this._isSelected=!1},_updateSelectProduct:function(e){if(e)this.push("selectedProducts",this.product.id);else if("undefined"!=typeof this.selectedProducts){var t=this.selectedProducts.indexOf(this.product.id);t>=0&&this.splice("selectedProducts",t,1)}}});</script></body></html>